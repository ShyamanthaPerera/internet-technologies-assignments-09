<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Internet Technologies Assignments 09</title>
</head>
<body>
<section>
  <div class="light"></div>
  <div class="light"></div>
  <div class="light"></div>
  <div class="light"></div>
  <div class="light"></div>
  <div class="light"></div>
</section>

<div id="button">
  <button id="btn_start">Start</button>
  <button id="btn_stop">Stop</button>
</div>

<audio id="audio" src="assets/audios/audio.mp3"></audio>

<script src="lib/jquery-3.7.1.min.js"></script>
<script>

  var current_light_index = 0;
  var max_light_count = 6;
  var move = "Right"

  function updateLightPanel(){
    $(".light").removeClass("light_on");
    $(".light").removeClass("light_on2");
    $(".light").eq(current_light_index).addClass("light_on");

    if (move==="Right"){
      if (current_light_index!==0) $(".light").eq(current_light_index-1).addClass("light_on2");

      ++current_light_index;
      if (current_light_index > max_light_count - 2){
        move = "Left";
      }
    } else {
      $(".light").eq(current_light_index+1).addClass("light_on2");
      --current_light_index;
      if (current_light_index===0){
        move = "Right";
      }
    }
  }

  $("#btn_start").on("click", ()=>{
    myInterval = setInterval(updateLightPanel, 80);
    $("#audio")[0].play();
  })

  $("#btn_stop").on("click", ()=>{
    clearInterval(myInterval);
    $("#audio")[0].pause();
  })

</script>
</body>
</html>